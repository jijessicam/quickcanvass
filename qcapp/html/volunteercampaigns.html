{% extends "base.html" %}
{% block content %}
{% load static %}

<script>
$(document).ready(function() {
  $("#search-rooms").click(function(){
  console.log("test room search");
  $.ajax({
      url: "/search/",
      context: document.body,
      "data": {
        "room-query": $("#room-query").val(),
      },
      type: 'POST',
      success: function(res){
        if(res['error'] == 'room search failed'){
          console.log('room search failed');
        }
        else{ // success! 
          console.log("i got something back!!!");
          console.log("results were not null");
          for (var i in res['results']) {
            console.log(res['results'][i])
          }
          console.log("I got to this point??? Help me")
          // window.location = res['url'];
        }
      },
      error: function(){
          console.log("room search error");
      }
  });
})
});
</script>

<container>
  <div class="col-lg-12 center">
        <h2 class="page-header">Canvass It!</h2>
      </div>
<div class="container-fluid text-center">
  <div class="row content">
    <div class="container">
      <div class="row">
            <div class="col-sm-10 col-sm-offset-1">
                <div id="custom-search-input">
                    <div class="input-group col-md-12">
                        <input type="text" class="form-control input-lg" id="room-query" placeholder="Find Closest Rooms..." />
                        <span class="input-group-btn">
                            <button class="btn btn-info btn-lg" id="search-rooms" type="submit">
                                <i class="glyphicon glyphicon-search"></i>
                            </button>
                        </span>
                    </div>
                </div>
            </div>
      </div>
          <p style = "margin-top: 10px">Thank you for helping {{ title }}.</p>
    </div>
</div>
  </div>
</div>
{% endblock %}
